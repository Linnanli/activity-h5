webpackJsonp([0],{"+irA":function(e,t){},"2oDT":function(e,t){e.exports='<div class="login-mask" style="display: none;">\r\n    <div class="login-warp">\r\n        <div class="close-btn"></div>\r\n        <div class="form-line">\r\n            <input class="phone-input" type="text" placeholder="请输入手机号">\r\n        </div>\r\n        <div class="form-line">\r\n            <input  class="check-code" type="text" placeholder="请输入验证码">\r\n            <button class="check-code-btn">获取验证码</button>\r\n        </div>\r\n        <div class="form-line">\r\n            <button class="login-btn">登录/注册</button>\r\n        </div>\r\n        <div class="protocol">登录即代表同意<span class="line-text">《考拉有借用户协议》</span></div>\r\n    </div>\r\n</div>'},boFr:function(e,t){!function(s){var c,u,l,p,d,h={};function v(){p=null,h.last&&(h.el.trigger("longTap"),h={})}function f(){p&&clearTimeout(p),p=null}function m(){c&&clearTimeout(c),u&&clearTimeout(u),l&&clearTimeout(l),p&&clearTimeout(p),c=u=l=p=null,h={}}function g(e){return("touch"==e.pointerType||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function b(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}s(document).ready(function(){var t,n,o,i,r=0,a=0;"MSGesture"in window&&((d=new MSGesture).target=document.body),s(document).bind("MSGestureEnd",function(e){var t=1<e.velocityX?"Right":e.velocityX<-1?"Left":1<e.velocityY?"Down":e.velocityY<-1?"Up":null;t&&(h.el.trigger("swipe"),h.el.trigger("swipe"+t))}).on("touchstart MSPointerDown pointerdown",function(e){(i=b(e,"down"))&&!g(e)||(o=i?e:e.touches[0],e.touches&&1===e.touches.length&&h.x2&&(h.x2=void 0,h.y2=void 0),t=Date.now(),n=t-(h.last||t),h.el=s("tagName"in o.target?o.target:o.target.parentNode),c&&clearTimeout(c),h.x1=o.pageX,h.y1=o.pageY,0<n&&n<=250&&(h.isDoubleTap=!0),h.last=t,p=setTimeout(v,750),d&&i&&d.addPointer(e.pointerId))}).on("touchmove MSPointerMove pointermove",function(e){(i=b(e,"move"))&&!g(e)||(o=i?e:e.touches[0],f(),h.x2=o.pageX,h.y2=o.pageY,r+=Math.abs(h.x1-h.x2),a+=Math.abs(h.y1-h.y2))}).on("touchend MSPointerUp pointerup",function(e){(i=b(e,"up"))&&!g(e)||(f(),h.x2&&30<Math.abs(h.x1-h.x2)||h.y2&&30<Math.abs(h.y1-h.y2)?l=setTimeout(function(){var e,t,n,o;h.el&&(h.el.trigger("swipe"),h.el.trigger("swipe"+(e=h.x1,t=h.x2,n=h.y1,o=h.y2,Math.abs(e-t)>=Math.abs(n-o)?0<e-t?"Left":"Right":0<n-o?"Up":"Down"))),h={}},0):"last"in h&&(r<30&&a<30?u=setTimeout(function(){var e=s.Event("tap");e.cancelTouch=m,h.el&&h.el.trigger(e),h.isDoubleTap?(h.el&&h.el.trigger("doubleTap"),h={}):c=setTimeout(function(){c=null,h.el&&h.el.trigger("singleTap"),h={}},250)},0):h={}),r=a=0)}).on("touchcancel MSPointerCancel pointercancel",m),s(window).on("scroll",m)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){s.fn[t]=function(e){return this.on(t,e)}})}(Zepto)},eN7I:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("rVsN"),s=n.n(o),i=n("lC5x"),u=n.n(i),r=n("J0Oq"),a=n.n(r),c=n("AA3o"),l=n.n(c),p=n("xSur"),d=n.n(p),h=n("2oDT"),v=n.n(h),f=(n("+irA"),n("ZoQJ")),m={required:function(e){return null!=e&&""!==e},mobile:/^1\d{10}/,idCard:/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|[xX])$/},g=function(e,t){var n=m[e];return void 0!==n&&("function"==typeof n?n(t):n.test(t))},b=(n("tQnr"),n("boFr"),function(){function t(e){l()(this,t),this.ele=null,this.time=60,this.params=null,this.jumpPath="",this.jumpPathParams=null,this.params=e,this.render(v.a),this.phoneEle=$(".phone-input"),this.checkCode=$(".check-code"),this.checkCodeBtn=$(".check-code-btn"),this.loginBtn=$(".login-btn"),this.bindEvent()}var e,n,o;return d()(t,[{key:"bindEvent",value:function(){var e=this;$(".line-text").on("tap",function(){var e=Object(f.e)("/user-protocol.html",{appName:"考拉有借",companyName:"杭州贝沃科技有限公司",shortCompanyName:"贝沃科技"});Object(f.h)(e)}),this.loginBtn.on("tap",function(){window._czc&&_czc.push(["_trackEvent","邀请新人-主页","登录/注册",,,"web"]),e.doLogin()}),this.checkCodeBtn.on("tap",function(){e.getCheckCode()}),$(".close-btn").on("tap",function(){e.hide()})}},{key:"show",value:function(e,t){this.jumpPath=e,this.jumpPathParams=t,this.ele.show()}},{key:"hide",value:function(){this.phoneEle.val(""),this.checkCode.val(""),this.checkCodeBtn.removeClass("disable"),this.ele.hide()}},{key:"countdown",value:function(){var e=this;if(this.checkCodeBtn.hasClass("disable"))return!1;this.checkCodeBtn.addClass("disable");var t=this.time,n=setInterval(function(){e.checkCodeBtn.text(t--+"秒"),-1===t&&(e.checkCodeBtn.removeClass("disable").text("获取验证码"),clearInterval(n))},1e3)}},{key:"getCheckCode",value:(o=a()(u.a.mark(function e(){var t,n,o,i,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.phoneEle.val(),g("mobile",t)){e.next=4;break}return toast("请输入正确手机号码"),e.abrupt("return");case 4:if(n=this.params.platform,o=0,o="Android"===n?2:"IOS"===n?3:1,!1===this.countdown())return e.abrupt("return");e.next=9;break;case 9:return loading.start(),e.prev=10,e.next=13,http({url:"/s1/sms/sendSms",data:{type:"6",phone:t,platform:o}});case 13:i=e.sent,r=i.msg,loading.stop(),toast(r),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(10),loading.stop(),console.log(e.t0),toast("服务器错误");case 24:case"end":return e.stop()}},e,this,[[10,19]])})),function(){return o.apply(this,arguments)})},{key:"doLogin",value:(n=a()(u.a.mark(function e(){var t,n,o,i,r,a,s,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.phoneEle.val(),n=this.checkCode.val(),g("mobile",t)){e.next=4;break}return e.abrupt("return",toast("请输入正确手机号码"));case 4:if(g("required",n)){e.next=6;break}return e.abrupt("return",toast("请输入验证码"));case 6:return loading.start(),o=this.params.platform,i=0,i="Android"===o?1:"IOS"===o?2:4,e.prev=10,e.next=13,http({url:"/s1/clientUser/login",data:{account:t,loginType:2,platform:i,verifyCode:n,active:"ActiveC"}});case 13:r=e.sent,a=r.msg,s=r.code,c=r.data,loading.stop(),1e6===s?(this.hide(),this.jumpTarget(c)):toast(a),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(10),loading.stop(),console.log(e.t0),toast("服务器错误");case 26:case"end":return e.stop()}},e,this,[[10,21]])})),function(){return n.apply(this,arguments)})},{key:"jumpTarget",value:function(e){this.setUserId(e.id),this.setCookie(e.account),this.jumpPathParams.userId=e.id;var t=Object(f.e)(this.jumpPath,this.jumpPathParams);Object(f.h)(t)}},{key:"isLogin",value:(e=a()(u.a.mark(function e(){var t,n,o,i,r,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getCookie(),n=this.params.platform,o=0,o="Android"===n?1:"IOS"===n?2:4,loading.start(),e.prev=5,e.next=8,http({url:"/s1/clientUser/login",data:{account:t,loginType:2,platform:o,active:"ActiveC"}});case 8:if(i=e.sent,r=i.code,a=i.data,loading.stop(),1e6===r)return e.abrupt("return",s.a.resolve(a));e.next=16;break;case 16:return e.abrupt("return",s.a.resolve(null));case 17:e.next=24;break;case 19:e.prev=19,e.t0=e.catch(5),loading.stop(),console.log(e.t0),toast("服务器错误");case 24:case"end":return e.stop()}},e,this,[[5,19]])})),function(){return e.apply(this,arguments)})},{key:"setUserId",value:function(e){this.params.userId=e,Object(f.g)("userId",e)}},{key:"getUserId",value:function(){return this.params.userId||Object(f.d)("userId")}},{key:"setCookie",value:function(e){$.fn.cookie("phone",e)}},{key:"getCookie",value:function(){return $.fn.cookie("phone")}},{key:"render",value:function(e){this.ele=$(e),$("body").append(this.ele),this.ele.find(".line-text").text("《"+this.params.appName+"用户协议》")}}]),t}());n.d(t,"Login",function(){return k});var k=b},tQnr:function(e,t){var s;(s=Zepto).extend(s.fn,{cookie:function(e,t,n){var o,i,r,a;return 1<arguments.length&&"[object Object]"!==String(t)?(n=s.extend({},n),null==t&&(n.expires=-1),"number"==typeof n.expires&&(o=24*n.expires*60*60*1e3,(i=n.expires=new Date).setTime(i.getTime()+o)),t=String(t),document.cookie=[encodeURIComponent(e),"=",n.raw?t:encodeURIComponent(t),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")):(a=(n=t||{}).raw?function(e){return e}:decodeURIComponent,(r=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?a(r[1]):null)}})}});